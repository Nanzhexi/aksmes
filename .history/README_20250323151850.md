# 股票财务报表下载与分析工具

这个工具使用 AKShare 库下载指定股票近十年的财务报表，包括资产负债表、利润表和现金流量表，并保存为CSV文件。同时提供财务数据分析和可视化功能，包括同比增长率分析和Web界面展示。

## 功能特点

- 自动识别沪深股票代码及北交所/新三板代码
- 下载资产负债表、利润表和现金流量表
- 自动筛选最近10年的数据
- 以CSV格式保存报表数据
- 自动创建数据存储目录
- 提供详细的下载状态和错误处理
- 财务数据分析与可视化
- 生成资产负债、收入利润和现金流量趋势图
- 计算并展示同比增长率
- 提供ROA和ROE等关键财务比率
- 基于Streamlit的Web界面

## 支持的股票类型

- 沪市主板：以`6`开头（如`600000`）
- 深市主板：以`0`开头（如`000001`）
- 创业板：以`3`开头（如`300750`）
- 科创板：以`6`开头（如`688xxx`）
- 北交所/新三板精选层：以`83`开头
- 北交所：以`4`开头
- 新三板：以`8`开头
- 上交所基金：以`5`开头
- 深交所基金：以`1`开头

## 安装依赖

在运行脚本前，请先安装必要的依赖包：

```bash
pip install -r requirements.txt
```

## 使用方法

本工具提供两种使用方式：命令行工具和Web应用。

### 命令行工具

#### 下载财务数据

1. 运行下载脚本：

```bash
python download_financial_data.py
```

2. 在提示时输入股票代码，例如：
   - 沪市股票：600000（浦发银行）
   - 深市股票：000001（平安银行）
   - 创业板股票：300750（宁德时代）
   - 科创板股票：688981（中芯国际）

3. 脚本会自动下载该股票近十年的财务报表，并保存在 `financial_data` 目录下。

#### 分析财务数据

1. 确保已经下载了至少一个股票的财务数据

2. 运行分析脚本：

```bash
python analyze_financial_data.py
```

3. 在提示时选择要分析的股票

4. 脚本会自动分析财务数据并生成以下内容：
   - 资产负债表关键指标分析
   - 利润表关键指标分析
   - 现金流量表关键指标分析
   - 资产负债趋势图
   - 收入利润趋势图
   - 现金流量趋势图

5. 生成的图表将保存在 `financial_charts` 目录下

### Web应用（Streamlit）

1. 运行Web应用：

```bash
streamlit run app.py
```

2. 浏览器会自动打开Web界面（通常是 http://localhost:8501）

3. 在侧边栏输入股票代码

4. 选择"下载财务数据"或"分析现有数据"

5. Web界面会自动展示以下内容：
   - 近五年主要财务指标（表格）
   - 营业收入与净利润趋势图
   - 同比增长率趋势图
   - 近五年财务比率（ROA、ROE等）
   - ROA与ROE趋势图

## 财务分析指标

应用提供以下财务分析指标：

### 基础指标
- 营业收入：企业的主要收入来源
- 净利润：企业最终盈利

### 增长指标
- 营业收入同比增长率：当期营业收入与上年同期相比的增长率
- 净利润同比增长率：当期净利润与上年同期相比的增长率

### 财务比率
- ROA（总资产收益率）：净利润 / 总资产，反映资产使用效率
- ROE（净资产收益率）：净利润 / 净资产，反映股东投资回报率

## 文件命名格式

下载的文件将按以下格式命名：

- 资产负债表：`股票代码_balance_sheet_日期.csv`
- 利润表：`股票代码_income_statement_日期.csv`
- 现金流量表：`股票代码_cash_flow_日期.csv`

图表文件命名格式：

- 资产负债趋势图：`股票代码_balance_sheet_chart_日期.png`
- 收入利润趋势图：`股票代码_income_statement_chart_日期.png`
- 现金流量趋势图：`股票代码_cash_flow_chart_日期.png`

## 错误处理

如果遇到下载问题，程序会提供详细的错误信息和可能的解决方案。常见问题包括：

- 股票代码格式不正确
- 所查询的股票没有财务数据
- 数据源接口暂时不可用

## 数据来源

数据来源于新浪财经，通过AKShare库获取。

## 注意事项

本应用提供的财务数据分析仅供参考，不构成任何投资建议。投资决策请结合其他因素综合考虑，风险自负。 